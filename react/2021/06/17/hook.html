<!DOCTYPE html>
<html lang="en-US">
  <head>
    

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="/blog/assets/css/main.css">
    <script src="https://kit.fontawesome.com/f9271f6bdd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="font-mono list-disc bg-gray-700">
    <div class="pt-8 bg-gray-700">
      
        <nav class="flex flex-wrap items-center justify-center px-2 py-4 mb-6">
  <div class="titleImagePosition">
    <a href="/blog/" class="!px-0 !py-0">
      <img class="titleImage" src="/blog/assets/img/title.jpeg" alt="author profile image">
    </a>
  </div>
</nav>

      
      
  
    <div id='sidebar' class='fixed py-16 hidden lg:block'></div>
    <div id='burger-sidebar' class='pt-24 pl-4 fixed hidden md:block'></div>
  

  <div class='prose bg-gray-400' id='article'>
    <div id='word-count' class='pt-4 pl-8 fixed'>words: 80</div>
    <div class='text-center'>
      
    </div>
    <div class='md:px-4 md:grid lg:px-72'>
      <h1 class='text-center mt-6 mb-6'>Hook</h1>
      <h2 id="introduction">Introduction</h2>

<ul>
  <li>functions to <strong>hook into</strong> React features</li>
  <li>do not work in a regular function or nested function in a component</li>
</ul>

<h2 id="why">Why</h2>

<p>React uses hooks as a way to manage state and lifecycle events in functional components. Hooks allow functional components to manage state and lifecycle events by providing a way to ‚Äúhook into‚Äù the React state and lifecycle system. Hooks also allow developers to reuse stateful logic across multiple components, which can reduce code duplication and improve maintainability. Hooks like useState, useEffect, and useContext are some of the most commonly used hooks in React.</p>

<h2 id="how">How</h2>

<p>Let‚Äôs use clock as example,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Clock</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">date</span><span class="p">,</span> <span class="nx">setDate</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span>
      <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">setDate</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()),</span> <span class="mi">1000</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>It is <span class="si">{</span><span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleTimeString</span><span class="p">()</span><span class="si">}</span>.<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Clock</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="usestate">useState</h3>

<p><code class="language-plaintext highlighter-rouge">useState</code> returns the current state and a function for updating the state. In the <code class="language-plaintext highlighter-rouge">Clock</code>, <code class="language-plaintext highlighter-rouge">const [count, setDate] = useState(0)</code> means set the initial value of count equals to 0 and use setCount to update the value of the state</p>

<ul>
  <li>we can warp the set method from <code class="language-plaintext highlighter-rouge">useState</code> in a function</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">example</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">setDate</span><span class="p">(</span><span class="nx">xxx</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="useeffect">useEffect</h3>

<p>Define customized effects and trigger it <strong>when rerender</strong> component. In the example above, after <code class="language-plaintext highlighter-rouge">Clock</code> component created, it will trigger function in <code class="language-plaintext highlighter-rouge">useEffect()</code>, which will trigger <code class="language-plaintext highlighter-rouge">setDate()</code> to set the value of <code class="language-plaintext highlighter-rouge">date</code> in each 1000 millisecond.</p>

<p>It may cause stack overflow as <code class="language-plaintext highlighter-rouge">useEffect</code> triggered every moment the component rendered; to avoid it, just add an empty array to tell react not to track any value changed.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">SidebarLayout</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">anchors</span><span class="p">,</span> <span class="nx">setAnchors</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setAnchors</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1, h2, h3, h4, h5, h6</span><span class="dl">'</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[]);</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">...</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="usecontext">useContext</h3>

<p>When we want to call method from parent component</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">ParentComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">MyContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">The button was clicked!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">MyContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=&gt;</span>
      <span class="p">&lt;</span><span class="nc">ChildComponent</span>
        <span class="na">MyContext</span><span class="p">=</span><span class="si">{</span><span class="nx">MyContext</span><span class="si">}</span>
      <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">MyContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">ChildComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">handleClick</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">MyContext</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClick</span><span class="si">}</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Note that the methods‚Äô naming in <code class="language-plaintext highlighter-rouge">MyContext</code> should be the same as in parent component</li>
</ul>

<h3 id="useref">useRef</h3>

<p><code class="language-plaintext highlighter-rouge">useRef</code> is a React hook that returns a mutable ref object used to access DOM elements or persist values. It is more efficient to use a ref to access a DOM element than to use <code class="language-plaintext highlighter-rouge">document.querySelector()</code>.</p>

<pre><code class="language-JSX">import React, { useRef } from 'react';

export default function App() {
  const ref = useRef(null);

  useEffect(() =&gt; {
    // üëáÔ∏è use a ref (best)
    const element2 = ref.current;
    console.log(element2);

    // üëáÔ∏è use document.querySelector()
    // should only be used when you can't set a ref prop on the element
    // (you don't have access to the element)
    const element = document.querySelector('#container');
    console.log(element);
  }, []);

  return (
    &lt;div&gt;
      &lt;div ref={ref} id="container"&gt;
        &lt;h2&gt;bobbyhadz.com&lt;/h2&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<h3 id="usecallback">useCallback</h3>

<p>I can use the <code class="language-plaintext highlighter-rouge">webcam</code> example</p>

<h3 id="useroute">useRoute</h3>

<p>As the concept of SPA (single page application), switching pages represents merely change the componets. Create a file for route setting:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Users</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/Users</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Contact</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/Contact</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">About</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/About</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Users</span> <span class="o">/&gt;</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">/about</span><span class="dl">"</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">About</span> <span class="o">/&gt;</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">/contact</span><span class="dl">"</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Contact</span> <span class="o">/&gt;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">routes</span><span class="p">;</span>
</code></pre></div></div>

<p>Then use these routes with useRoute:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">useRoutes</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">hookrouter</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Routes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./router</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">routeResult</span> <span class="o">=</span> <span class="nx">useRoutes</span><span class="p">(</span><span class="nx">Routes</span><span class="p">)</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">App</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/user</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Users</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/a</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/about</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">About</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/a</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/contact</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Contacts</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/a</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="nx">routeResult</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="usememo">useMemo</h3>

<p>a React Hook that lets you cache the result of a calculation between re-renders.</p>

<h3 id="other">Other</h3>

<h4 id="onclick">Onclick</h4>

<p>Define what to do when we click a button</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">button</span>
  <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="nx">fn1</span><span class="p">();</span> <span class="nx">fn2</span><span class="p">()}}</span>
  <span class="nx">className</span><span class="o">=</span><span class="dl">""</span>
<span class="o">&gt;</span><span class="nx">Click</span> <span class="nx">me</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span></code></pre></div></div>

<ul>
  <li>useEffect
    <ul>
      <li>define customized effects and trigger it <strong>when rerender</strong> component</li>
    </ul>
  </li>
  <li>useRef: two usages
    <ul>
      <li>store value of reference and it will not rerender component when value changed</li>
      <li>serve as reference of current component (like queryselector)</li>
    </ul>
  </li>
  <li>useContext: TBC</li>
  <li>class &amp; lifecycle vs hooks: TBC</li>
</ul>

<h2 id="reference">Reference</h2>

<p><a href="https://www.youtube.com/watch?v=TNhaISOUy6Q">10 React Hooks Explained // Plus Build your own from Scratch</a></p>

<p><a href="https://blog.logrocket.com/how-react-hooks-can-replace-react-router/">useRoute</a></p>

<p><a href="https://stackoverflow.com/questions/53464595/how-to-use-componentwillmount-in-react-hooks">life cycle methods in React Hooks?</a></p>

<p><a href="https://reactjs.org/docs/hooks-effect.html">Using the Effect Hook</a></p>

<p><a href="https://www.digitalocean.com/community/tutorials/how-to-share-state-across-react-components-with-context">how to share state across react components with context</a></p>

<p><a href="https://bobbyhadz.com/blog/react-document-queryselector">What is the equivalent of document.querySelector in React</a></p>

    </div>
  </div>

  <footer class="relative px-4 pt-4 pb-4">
    <!-- footer msg -->
  <div class="flex flex-wrap items-center justify-center">
    <br>
  </div>
</footer>


      <button
        type="button"
        data-mdb-ripple="true"
        data-mdb-ripple-color="light"
        class="scrollTopBtn"
        id="btn-back-to-top"
      >
        <svg aria-hidden="true" focusable="false" data-prefix="fas" class="w-4 h-4" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg>
      </button>
    </div>
  </body>

  <script>
    /* Function for getting the current year in the footer */
    (function () {
      if (document.getElementById("get-current-year")) {
        document.getElementById(
          "get-current-year"
        ).innerHTML = new Date().getFullYear();
      }
    })();
    /* Function for opening navbar on mobile */
    function toggleNavbar(collapseID) {
        document.getElementById(collapseID).classList.toggle("hidden");
        document.getElementById(collapseID).classList.toggle("block");
      }
    /* Function for dropdowns */
    function openDropdown(event, dropdownID) {
      let element = event.target;
      while (element.nodeName !== "A") {
        element = element.parentNode;
      }
      document.getElementById(dropdownID).classList.toggle("hidden");
      document.getElementById(dropdownID).classList.toggle("block");
    }

    // Get the button
    let myButton = document.getElementById("btn-back-to-top");
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
      scrollFunction();
    };
    function scrollFunction() {
      if (
        document.body.scrollTop > 20 ||
        document.documentElement.scrollTop > 20
      ) {
        myButton.style.display = "block";
      } else {
        myButton.style.display = "none";
      }
    }
    // When the user clicks on the button, scroll to the top of the document
    myButton.addEventListener("click", backToTop);
    function backToTop() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>

  <script type="text/javascript" src="/blog/assets/javascript/bundle.js" charset="utf-8"></script>
</html>
